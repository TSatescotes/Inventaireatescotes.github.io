document.addEventListener("DOMContentLoaded", function () {
    const API_URL = "https://api.jsonbin.io/v3/b/673c9a24e41b4d34e456eab6";
    const MASTER_KEY = "$2a$10$C2IpRYDMnBVS09UziRhWsuPTWBDUAY3bghoT9Fz9cORd/9QFWGhiW";
    const ACCESS_KEY = "$2a$10$CK7kuKd1eFHbsVtOb88Jbu4vIKYO5oTKnHfu2t0L.vVU2DP/wHcmW";
    let inventoryItems = [];

    // Charger les données depuis JSONBin
    async function loadFromJsonBin() {
        try {
            const response = await fetch(API_URL, {
                method: "GET",
                headers: {
                    "X-Access-Key": ACCESS_KEY,
                },
            });
            const data = await response.json();
            inventoryItems = data.record || [];
            loadInventory(); // Affiche les données dans l'interface
        } catch (error) {
            console.error("Erreur lors du chargement des données :", error);
        }
    }

    // Sauvegarder les données dans JSONBin
    async function saveToJsonBin() {
        try {
            await fetch(API_URL, {
                method: "PUT",
                headers: {
                    "Content-Type": "application/json",
                    "X-Master-Key": MASTER_KEY,
                },
                body: JSON.stringify(inventoryItems),
            });
        } catch (error) {
            console.error("Erreur lors de la sauvegarde des données :", error);
        }
    }

    // Afficher les articles dans l'inventaire
    function loadInventory() {
        const inventoryDiv = document.getElementById("inventory");
        inventoryDiv.innerHTML = ""; // Réinitialise l'affichage

        inventoryItems.forEach((item) => {
            createItemElement(item.id, item.name, item.quantity);
        });
    }

    // Créer un élément HTML pour chaque article
    function createItemElement(id, name, quantity) {
        const inventoryDiv = document.getElementById("inventory");
        const itemDiv = document.createElement("div");
        itemDiv.className = "item";
        itemDiv.id = id;

        const nameDisplay = document.createElement("span");
        nameDisplay.textContent = name;
        itemDiv.appendChild(nameDisplay);

        // Champ d'entrée pour modifier la quantité
        const quantityInput = document.createElement("input");
        quantityInput.type = "number";
        quantityInput.value = quantity;
        quantityInput.className = "quantityInput";
        quantityInput.min = 0;

        // Sauvegarder la quantité
